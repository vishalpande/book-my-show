{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/pande/OneDrive/Desktop/Book-My-Show/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/pande/OneDrive/Desktop/Book-My-Show/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/pande/OneDrive/Desktop/Book-My-Show/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import BsContext from\"./BsContext\";import{jsx as _jsx}from\"react/jsx-runtime\";var BsState=function BsState(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),errorPopup=_useState2[0],setErrorPopup=_useState2[1];//error message\nvar _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),errorMessage=_useState4[0],setErrorMessage=_useState4[1];// time slot which the user selects.\nvar _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),time=_useState6[0],changeTime=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),movie=_useState8[0],changeMovie=_useState8[1];var _useState9=useState({A1:\"\",A2:\"\",A3:\"\",A4:\"\",D1:\"\",D2:\"\"}),_useState10=_slicedToArray(_useState9,2),noOfSeat=_useState10[0],changeNoOfSeats=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),lastBookingDetails=_useState12[0],setLastBookingDetails=_useState12[1];var handlePostBooking=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://bookmyshow-backend-7wzv.onrender.com/api/booking\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({movie:movie,slot:time,seats:noOfSeat})});case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;//showing message from backend on popup to user whether success or error\nsetErrorPopup(true);setErrorMessage(data.message);if(response.status===200){//reset the state on success\nchangeTime(\"\");changeMovie(\"\");changeNoOfSeats({A1:\"\",A2:\"\",A3:\"\",A4:\"\",D1:\"\",D2:\"\"});setLastBookingDetails(data.data);//clearing the local storage when booking is successfull\nwindow.localStorage.clear();}case 9:case\"end\":return _context.stop();}},_callee);}));return function handlePostBooking(){return _ref.apply(this,arguments);};}();//handle get request to get the last booking details from backend\nvar handleGetLastBooking=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"https://bookmyshow-backend-7wzv.onrender.com/api/booking\",{method:\"GET\"});case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:data=_context2.sent;// Setting last booking details recieved from the backend.\nsetLastBookingDetails(data.data);case 7:case\"end\":return _context2.stop();}},_callee2);}));return function handleGetLastBooking(){return _ref2.apply(this,arguments);};}();useEffect(function(){//getting movies, slot and seats from localstorage and updating state (useful when page refreshes)\nvar movie=window.localStorage.getItem(\"movie\");var slot=window.localStorage.getItem(\"slot\");var seats=JSON.parse(window.localStorage.getItem(\"seats\"));if(movie){changeMovie(movie);}if(slot){changeTime(slot);}if(seats){changeNoOfSeats(seats);}},[]);return/*#__PURE__*/ (// providing all the required data to app\n_jsx(BsContext.Provider,{value:{handlePostBooking:handlePostBooking,handleGetLastBooking:handleGetLastBooking,movie:movie,changeMovie:changeMovie,time:time,changeTime:changeTime,noOfSeat:noOfSeat,changeNoOfSeats:changeNoOfSeats,lastBookingDetails:lastBookingDetails,errorPopup:errorPopup,setErrorPopup:setErrorPopup,errorMessage:errorMessage,setErrorMessage:setErrorMessage},children:props.children}));};export default BsState;","map":{"version":3,"names":["React","useState","useEffect","BsContext","jsx","_jsx","BsState","props","_useState","_useState2","_slicedToArray","errorPopup","setErrorPopup","_useState3","_useState4","errorMessage","setErrorMessage","_useState5","_useState6","time","changeTime","_useState7","_useState8","movie","changeMovie","_useState9","A1","A2","A3","A4","D1","D2","_useState10","noOfSeat","changeNoOfSeats","_useState11","_useState12","lastBookingDetails","setLastBookingDetails","handlePostBooking","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","method","headers","body","JSON","stringify","slot","seats","sent","json","message","status","window","localStorage","clear","stop","apply","arguments","handleGetLastBooking","_ref2","_callee2","_callee2$","_context2","getItem","parse","Provider","value","children"],"sources":["C:/Users/pande/OneDrive/Desktop/Book-My-Show/frontend/src/Context/BsState.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport BsContext from \"./BsContext\";\n\nconst BsState = (props) => {\n  const [errorPopup, setErrorPopup] = useState(false);\n\n  //error message\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  // time slot which the user selects.\n  const [time, changeTime] = useState(\"\");\n\n  const [movie, changeMovie] = useState(\"\");\n\n  const [noOfSeat, changeNoOfSeats] = useState({\n    A1: \"\",\n    A2: \"\",\n    A3: \"\",\n    A4: \"\",\n    D1: \"\",\n    D2: \"\",\n  });\n\n  const [lastBookingDetails, setLastBookingDetails] = useState(null);\n\n  const handlePostBooking = async () => {\n    // Sending api request to backend with user selected movie, slot and seats to book movie.\n    const response = await fetch(\n      `https://bookmyshow-backend-7wzv.onrender.com/api/booking`,\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ movie: movie, slot: time, seats: noOfSeat }),\n      }\n    );\n\n    const data = await response.json();\n\n    //showing message from backend on popup to user whether success or error\n    setErrorPopup(true);\n    setErrorMessage(data.message);\n\n    if (response.status === 200) {\n      //reset the state on success\n      changeTime(\"\");\n      changeMovie(\"\");\n      changeNoOfSeats({\n        A1: \"\",\n        A2: \"\",\n        A3: \"\",\n        A4: \"\",\n        D1: \"\",\n        D2: \"\",\n      });\n      setLastBookingDetails(data.data);\n\n      //clearing the local storage when booking is successfull\n      window.localStorage.clear();\n    }\n  };\n\n  //handle get request to get the last booking details from backend\n  const handleGetLastBooking = async () => {\n    const response = await fetch(\n      `https://bookmyshow-backend-7wzv.onrender.com/api/booking`,\n      {\n        method: \"GET\",\n      }\n    );\n\n    const data = await response.json();\n\n    // Setting last booking details recieved from the backend.\n    setLastBookingDetails(data.data);\n  };\n\n  useEffect(() => {\n    //getting movies, slot and seats from localstorage and updating state (useful when page refreshes)\n    const movie = window.localStorage.getItem(\"movie\");\n    const slot = window.localStorage.getItem(\"slot\");\n    const seats = JSON.parse(window.localStorage.getItem(\"seats\"));\n\n    if (movie) {\n      changeMovie(movie);\n    }\n    if (slot) {\n      changeTime(slot);\n    }\n    if (seats) {\n      changeNoOfSeats(seats);\n    }\n  }, []);\n\n  return (\n    // providing all the required data to app\n    <BsContext.Provider\n      value={{\n        handlePostBooking,\n        handleGetLastBooking,\n        movie,\n        changeMovie,\n        time,\n        changeTime,\n        noOfSeat,\n        changeNoOfSeats,\n        lastBookingDetails,\n        errorPopup,\n        setErrorPopup,\n        errorMessage,\n        setErrorMessage,\n      }}\n    >\n      {props.children}\n    </BsContext.Provider>\n  );\n};\n\nexport default BsState;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}